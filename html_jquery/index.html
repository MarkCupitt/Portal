<!DOCTYPE html>
<html>
<head>
<title>Web-Services</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="index.css">
<script src="js/jquery-2.0.3.js"></script>
<script src="js/util.js"></script>
</head>

<body>
<script>
var template = '<li><div class="listItem_title"><a href="details.html?id={id}">'+
  '{title}</a></div>'+
  '<div class="listItem_date">{date}</div>'+
  '<div class="listItem_descr">{descr}</div><br>'+
  '</li>';

function fillList(data) {
  var html = '';
  $.each(data, function(i, listItem) {
    html += util.parse(template, listItem);
  });

  $('#list').html(html);
}

$(function() {
// TODO: get latest 10
//  $.getJSON('server/?list', function(data) {
//    fillList(data);
//  });

  $('#search').submit(function(e) {
    e.preventDefault();
    // TODO: use list+filter
    $.getJSON('server/?search&searchterm='+ encodeURIComponent($('#search input').val()), function(data) {
      fillList(data);
    });
  });

  $('#btn_add').click(function() {
    location.href = 'edit.html';
  });
});
</script>

<div id="content">
  <h1>Web-Services</h1>

  <form id="search">
    <input type="search">
    <button type="submit">Search</button>
  </form>

  <ul id="list"></ul>

  <button id="btn_add" type="button">Add data</button>
</div>
</body>
</html>